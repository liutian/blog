### å­—ç¬¦ä¸²
JSå­—ç¬¦ä¸²æ˜¯ä¸€ç»„ç”±16ä½å€¼ç»„æˆçš„ä¸å¯å˜æœ‰åºåºåˆ—ï¼Œä¹Ÿå°±æ˜¯æœ€å°å•å…ƒä¸º2å­—èŠ‚ã€‚å¯¹å­—ç¬¦ä¸²çš„å„ç§æ“ä½œæœ€ç»ˆéƒ½æ˜¯åœ¨é’ˆå¯¹è¿™äº›16ä½å€¼ï¼Œè€Œ**éå­—ç¬¦**ï¼Œä¾‹å¦‚ï¼š'ğŸ˜‚'.length === 2


### Unicodeå­—ç¬¦é›†
Unicodeä¸­çš„å­—ç¬¦æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œæ¯ä¸€ä¸ªæŠ½è±¡å­—ç¬¦éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„åç§°ï¼Œä¾‹å¦‚LATIN SMALL LETTER Aï¼Œè¯¥æŠ½è±¡å­—ç¬¦çš„å›¾åƒè¡¨ç°å½¢å¼æ˜¯aï¼ŒUnicodeçš„ä½œç”¨å°±æ˜¯æä¾›ä¸€ä¸ªæŠ½è±¡å­—ç¬¦åˆ—è¡¨ï¼Œå¹¶ç»™æ¯ä¸€ä¸ªå­—ç¬¦åˆ†é…ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç¼–å·ç§°ä½œ**ç ç‚¹**ï¼ŒåŒæ—¶å°†æ•´ä¸ªç¼–ç ç©ºé—´å¹³å‡åˆ†ä¸º17ä¸ªåŒºåŸŸç§°ä½œ**å¹³é¢**ï¼Œæ¯ä¸ªå¹³é¢å¯ä»¥ä¿å­˜65536ä¸ªå­—ç¬¦ï¼Œç¬¬ä¸€ä¸ªå¹³é¢å«åŸºæœ¬å¤šæ–‡ç§å¹³é¢ï¼ˆBMPï¼‰ï¼ŒåŒ…å«äº†å¤§å¤šæ•°ç°ä»£è¯­è¨€çš„å­—ç¬¦ï¼Œä¹Ÿæ˜¯ä½¿ç”¨é¢‘ç‡è¾ƒé«˜çš„å­—ç¬¦ï¼Œå…¶ä»–å¹³é¢å«è¾…åŠ©å¹³é¢ã€‚æ•´ä¸ªç¼–ç ç©ºé—´ï¼Œç ç‚¹èŒƒå›´U+000000ï½U+10FFFFã€‚   


### å­—ç¬¦ç¼–ç 
å­—ç¬¦ç¼–ç å°±æ˜¯ç”¨æ¥è§„å®šå¦‚ä½•å°†ç ç‚¹è½¬æ¢ä¸ºäºŒè¿›åˆ¶åºåˆ—ï¼Œä»¥åŠå¦‚ä½•å°†äºŒè¿›åˆ¶åºåˆ—è§£æä¸ºå¯¹åº”ç ç‚¹ï¼Œæœ€ç®€å•çš„å­—ç¬¦ç¼–ç å°±æ˜¯UTF-32ï¼Œä¸€æ¬¡è¯»å–4ä¸ªå­—èŠ‚ï¼Œç„¶åå°†äºŒè¿›åˆ¶ç›´æ¥è½¬æ¢ä¸ºåå…­è¿›åˆ¶å¾—åˆ°çš„å°±æ˜¯å¯¹åº”å­—ç¬¦çš„ç ç‚¹


### UCS-2
UCS-2æ˜¯ä¸€ä¸ªå·²ç»åºŸå¼ƒçš„å®šé•¿ç¼–ç ï¼Œå§‹ç»ˆä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚ç¼–ç BMPä¸­çš„å­—ç¬¦ã€‚å¯¹äºéBMPä¸­çš„å­—ç¬¦ï¼ŒUCS-2æ— æ³•ç¼–ç ã€‚JSåœ¨åˆ›å»ºä¹‹åˆé‡‡ç”¨çš„æ˜¯UCS-2ç¼–ç 


### UTF-16
UTF16æ˜¯UCS-2çš„ä¸€ä¸ªæ‰©å±•ï¼Œæ˜¯ä¸€ä¸ªå˜é•¿ç¼–ç ï¼Œæ¯æ¬¡è¯»å–2ä¸ªå­—èŠ‚ï¼ŒBMPä¸­çš„å­—ç¬¦åªéœ€è¦è¯»å–ä¸€æ¬¡å°±å¯ä»¥ç¡®è®¤ä¸€ä¸ªå­—ç¬¦ï¼Œç¼–ç æ–¹å¼å’ŒUCS-2ä¸€æ ·ï¼Œè€ŒéBMPä¸­çš„å­—ç¬¦éœ€è¦è¯»å–ä¸¤æ¬¡æ‰èƒ½ç¡®è®¤ä¸€ä¸ªå­—ç¬¦ï¼Œé‡‡ç”¨Surrogate Pairsçš„æŠ€æœ¯æ¥è¿›è¡Œç¼–ç ã€‚  
åœ¨BMPä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç ç‚¹éƒ½å®šä¹‰äº†å­—ç¬¦ï¼Œå­˜åœ¨ä¸€ä¸ªç©ºç™½åŒºï¼Œ0xD800 - 0xDFFFè¿™ä¸ªèŒƒå›´å†…çš„ç ç‚¹æ²¡æœ‰æ˜ å°„ä»»ä½•å­—ç¬¦ï¼ŒUTF-16ç¼–ç å°±æ˜¯åˆ©ç”¨è¿™ä¸€ç‰¹æ€§ä¿å­˜è¾…åŠ©å¹³é¢å­—ç¬¦ï¼Œå…·ä½“æ–¹å¼æ˜¯å°†è¾…åŠ©å¹³é¢å­—ç¬¦å¯¹åº”çš„ç ç‚¹è½¬æ¢ä¸º20ä½äºŒè¿›åˆ¶æ•°ï¼Œå¹¶å°†20ä½äºŒè¿›åˆ¶æ•°æ‹†åˆ†ä¸ºä¸¤ä»½åˆ†åˆ«å­˜å‚¨åœ¨ä¸¤ä¸ª2å­—èŠ‚ä¸­ç§°ä½œ**ä»£ç†å¯¹**ï¼Œå‰ä¸€ä¸ª10ä½äºŒè¿›åˆ¶æ•°å­˜å‚¨åœ¨U+D800åˆ°U+DBFFä¸­ç§°ä¸ºé«˜ä½ä»£ç†ï¼Œåä¸€ä¸ª10ä½äºŒè¿›åˆ¶æ•°å­˜å‚¨åœ¨U+DC00åˆ°U+DFFFä¸­æˆä¸ºä½ä½ä»£ç†ã€‚UTF-16ä¸€æ¬¡è¯»å–2ä¸ªå­—èŠ‚ï¼Œå¹¶è¯•å›¾å°†å…¶è½¬æ¢ä¸ºåŸºæœ¬å¹³é¢å­—ç¬¦ï¼Œå½“é‡åˆ°ä¸€ä¸ªç ç‚¹åœ¨U+D800åˆ°U+DBFFèŒƒå›´ä¸­æ—¶ï¼Œå°±å¯ä»¥æ–­å®šå¾—åˆ°çš„å­—ç¬¦æ˜¯è¾…åŠ©å¹³é¢çš„å­—ç¬¦ï¼Œåœ¨æ¥ç€è¯»å–2ä¸ªå­—èŠ‚ï¼Œæ¥ä¸‹æ¥çš„ç ç‚¹åœ¨U+DC00åˆ°U+DFFFä¹‹é—´ã€‚   
ä»¥emojiğŸ˜œä¸ºä¾‹ï¼Œç ç‚¹ä¸º0x01F61Cï¼Œå‡å»0x10000ï¼Œç»“æœä¸º0xF61Cï¼Œæ¢æˆ20ä½äºŒè¿›åˆ¶æ•°æ˜¯0000_1111_0110_0001_1100ã€‚å°†è¿™20ä½åˆ†ä¸¤éƒ¨åˆ†ä¿å­˜åœ¨2ä¸ª2å­—èŠ‚ä¸­å¾—åˆ°çš„ç»“æœæ˜¯ï¼Œé«˜ä½ä»£ç†ï¼š1101_1000_0011_1101ï¼Œä½ä½ä»£ç†ï¼š1101_1110_0001_1100ï¼Œè½¬æ¢ä¸º16è¿›åˆ¶ä¾¿æ˜¯0xD83D 0xDE1Cï¼Œè¿™å°±æ˜¯ğŸ˜œçš„UTF16ç¼–ç 


### JSä½¿ç”¨å“ªç§å­—ç¬¦ç¼–ç 
ECMAScriptè§„èŒƒé‡‡ç”¨Unicodeå­—ç¬¦é›†ï¼Œä½†æ˜¯åœ¨es6ä¹‹å‰é‡‡ç”¨UCS-2ç¼–ç ä¸æ”¯æŒè¾…åŠ©å¹³é¢å­—ç¬¦ï¼ˆå½“æ—¶è¿˜æ²¡æœ‰è¾…åŠ©å¹³é¢å­—ç¬¦ï¼‰ï¼Œes6ä¹‹åé‡‡ç”¨UTF-16ç¼–ç ï¼ŒUCS-2æ˜¯UTF-16å­é›†ã€‚
> ES2015è§„èŒƒæåˆ°æºä»£ç æ–‡æœ¬ä½¿ç”¨Unicodeè¡¨ç¤ºã€‚å°½ç®¡ECMAScriptè§„èŒƒæ²¡æœ‰æŒ‡æ˜æºç å‚¨å­˜å’Œäº¤æ¢çš„æ–¹å¼ï¼Œä½†é€šå¸¸éƒ½ä»¥UTF-8ç¼–ç ï¼ˆåœ¨webä¸­æ¨èä½¿ç”¨çš„ç¼–ç ï¼‰


### UTF-8
UTF-8ä¹Ÿæ˜¯å˜é•¿ç¼–ç ï¼Œæ¯æ¬¡è¯»å–1ä¸ªå­—èŠ‚ï¼Œç¼–ç è§„åˆ™å¦‚ä¸‹ï¼š
- å¯¹äºå•å­—èŠ‚çš„ç¬¦å·ï¼Œå­—èŠ‚çš„ç¬¬ä¸€ä½è®¾ä¸º0ï¼Œåé¢7ä½ä¸ºè¿™ä¸ªç¬¦å·çš„ Unicode ç ã€‚å› æ­¤å¯¹äºè‹±è¯­å­—æ¯ï¼ŒUTF-8 ç¼–ç å’Œ ASCII ç æ˜¯ç›¸åŒçš„ã€‚
- å¯¹äºnå­—èŠ‚çš„ç¬¦å·ï¼ˆn > 1ï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰nä½éƒ½è®¾ä¸º1ï¼Œç¬¬n + 1ä½è®¾ä¸º0ï¼Œåé¢å­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º10ã€‚å‰©ä¸‹çš„æ²¡æœ‰æåŠçš„äºŒè¿›åˆ¶ä½ï¼Œå…¨éƒ¨ä¸ºè¿™ä¸ªç¬¦å·çš„ Unicode ç ã€‚
ï½œ Unicodeç¬¦å·èŒƒå›´     ï½œ UTF-8ç¼–ç æ–¹å¼ï½œ
ï½œ     ----           ï½œ----         ï½œ
ï½œ0000 0000-0000 007Fï½œ 0xxxxxxxï½œ
ï½œ0000 0080-0000 07FFï½œ110xxxxx 10xxxxxxï½œ
ï½œ0000 0800-0000 FFFFï½œ1110xxxx 10xxxxxx 10xxxxxxï½œ
ï½œ0001 0000-0010 FFFFï½œ11110xxx 10xxxxxx 10xxxxxx 10xxxxxxï½œ
å…·ä½“è§„åˆ™å¦‚ä¸‹ï¼Œå·¦è¾¹ä¸ºç ç‚¹èŒƒå›´ï¼Œå³è¾¹ä¸ºäºŒè¿›åˆ¶ç¼–ç å½¢å¼ã€‚   
0x0000 â€“ 0x007F: 0xxx_xxxxï¼Œä½¿ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œç¼–ç 7ä½ã€‚   
0x0080 â€“ 0x07FF: 110x_xxxx, 10xx_xxxxï¼Œä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚ï¼Œç¼–ç 11ä½ã€‚   
0x0800 â€“ 0xFFFF: 1110_xxxx, 10xx_xxxx, 10xx_xxxxï¼Œä½¿ç”¨ä¸‰ä¸ªå­—èŠ‚ç¼–ç 16ä½ã€‚   
0x10000 â€“ 0x1FFFFF: 1111_0xxx, 10xx_xxxx, 10xx_xxxx, 10xx_xxxxï¼Œä½¿ç”¨å››ä¸ªå­—èŠ‚ï¼Œç¼–ç 21ä½ã€‚  
è¿˜æ˜¯ä»¥emojiğŸ˜œä¸ºä¾‹ï¼Œç ç‚¹ä¸º0x1F61Cï¼Œåœ¨åŒºé—´0x10000 - 0x1FFFFFä¹‹ä¸­ï¼Œéœ€è¦ä½¿ç”¨å››ä¸ªå­—èŠ‚è¿›è¡Œç¼–ç ã€‚é¦–å…ˆå°†å…¶è½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼Œå¡«å……ä¸º21ä½ï¼Œç»“æœæ˜¯0_0001_1111_0110_0001_1100ï¼Œç„¶åå°†è¿™21ä½æŒ‰ç…§ä¸Šè¿°è¯´æ˜å¡«å…¥ï¼Œç»“æœæ˜¯1111_0000ï¼Œ1001_1111ï¼Œ1001_1000ï¼Œ1001_1100ï¼Œæ¢æˆ16è¿›åˆ¶ä¾¿æ˜¯0xF0 0x9F 0x98 0x9Cï¼Œè¿™å°±æ˜¯ğŸ˜œçš„UTF8ç¼–ç ã€‚  


### ASCII
ASCIIä¸€å…±è§„å®šäº†128ä¸ªå­—ç¬¦çš„ç¼–ç ï¼Œæ¯”å¦‚ç©ºæ ¼SPACEæ˜¯32ï¼ˆäºŒè¿›åˆ¶00100000ï¼‰ï¼Œå¤§å†™çš„å­—æ¯Aæ˜¯65ï¼ˆäºŒè¿›åˆ¶01000001ï¼‰ã€‚è¿™128ä¸ªç¬¦å·ï¼ˆåŒ…æ‹¬32ä¸ªä¸èƒ½æ‰“å°å‡ºæ¥çš„æ§åˆ¶ç¬¦å·ï¼‰ï¼Œåªå ç”¨äº†ä¸€ä¸ªå­—èŠ‚çš„åé¢7ä½ï¼Œæœ€å‰é¢çš„ä¸€ä½ç»Ÿä¸€è§„å®šä¸º0


### å¦‚ä½•å¾—åˆ°æ­£ç¡®çš„å­—ç¬¦ä¸²é•¿åº¦
`[...'ğŸ˜œ'].length` æˆ–è€… `Array.from('ğŸ˜œ').length`  è¿™ä¸¤ç§æ–¹å¼éƒ½ä¼šä½¿ç”¨åˆ°å­—ç¬¦ä¸²è¿­ä»£å™¨ï¼Œè€Œå­—ç¬¦ä¸²è¿­ä»£å™¨èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«Unicodeå­—ç¬¦  
```
var regexAstralSymbols = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g; 
 
function countSymbols(string) {
  // æŠŠä»£ç†å¯¹æ”¹ä¸ºä¸€ä¸ªBMPçš„å­—ç¬¦.
  return string.replace(regexAstralSymbols, '_').length;
}

countSymbols('ğŸ˜œ'); 
```


### ä¸ºä½•ä¸¤ä¸ªå­—ç¬¦çœ‹èµ·æ¥ä¸€æ ·æ¯”è¾ƒæ—¶å´ä¸ç›¸ç­‰
es6å¼•å…¥äº†**å­—ç¬¦ç»„åˆ**çš„æ¦‚å¿µï¼Œä¸€ä¸ªæ™®é€šå­—ç¬¦å’Œä¿®é¥°å­—ç¬¦å¯ä»¥åœ¨è§†è§‰ä¸Šç»„åˆæˆä¸€ä¸ªå­—ç¬¦ï¼Œå¸¸ç”¨æ¥è¡¨ç¤ºæ¬§æ´²è¯­è¨€ä¸­è¯­è°ƒç¬¦å·å’Œé‡éŸ³ç¬¦å·ï¼Œä¾‹å¦‚ï¼šÃ… è¯¥å­—ç¬¦ç”±ä¸¤ä¸ªç¼–ç å•å…ƒç»„æˆ **\u0041\u030A** å‰ä¸€ä¸ªä»£è¡¨Aå­—æ¯ï¼Œåä¸€ä¸ªä»£è¡¨è¯­è°ƒç¬¦å·ã€‚åŒæ—¶Unicodeå­—ç¬¦é›†åˆä¸ºè¿™äº›å­—ç¬¦ç»„åˆå½¢å¼æä¾›äº†å•ç‹¬çš„åˆæˆå­—ç¬¦ï¼ŒÃ…å¯¹åº”çš„åˆæˆå­—ç¬¦ç ç‚¹ä¸º **\u212B**ï¼Œè¿™å°±é€ æˆæ¥ä¸¤ä¸ªå­—ç¬¦è§†è§‰ä¸Šè¡¨ç°ä¸€è‡´ä½†æ˜¯ç¨‹åºæ¯”è¾ƒæ—¶ä¸ä¸€è‡´ï¼Œå› ä¸ºæ¯”è¾ƒæ“ä½œé’ˆå¯¹çš„æ˜¯å­—ç¬¦**ç ç‚¹**ï¼Œä¸ºäº†è§£å†³è¯¥é—®é¢˜å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²çš„å®ä¾‹æ–¹æ³• **normalize** è¯¥æ–¹æ³•å¯ä»¥å°†è§†è§‰å’Œè¯­ä¹‰ç›¸åŒä½†æ˜¯ç ç‚¹ä¸ç›¸åŒçš„å­—ç¬¦è½¬åŒ–ä¸ºç›¸åŒçš„ç ç‚¹
```
var first = '\u212B';         // "Ã…"
var second = '\u0041\u030A';  // "Ã…"

console.log(first + ' and ' + second + ' are' + ((first === second)? '': ' not') + ' the same.');

console.log(first + ' and ' + second + ' can' + ((first.normalize('NFC') === second.normalize('NFC'))? '': ' not') + ' be normalized');
```


### å­—ç¬¦ä¸²è¡¨ç¤ºæ–¹å¼
'a' '\a' '\141' '\x61' '\u0061' '\u{61}'


### å¦‚ä½•æ­£ç¡®éå†å­—ç¬¦ä¸²
es6ä¸ºå­—ç¬¦ä¸²æä¾›éå†æ¥å£ï¼Œå¹¶ä¸”å¯ä»¥æ­£ç¡®å¤„ç†éBMPå­—ç¬¦ï¼Œä¼ ç»Ÿforä¸ä¼šè°ƒç”¨å­—ç¬¦ä¸²éå†å™¨æ¥å£ï¼Œæ‰€ä»¥æ— æ³•æ­£ç¡®éå†åŒ…å«éBMPå­—ç¬¦ã€‚é€šè¿‡for ... of æˆ–è€… Array.from å¯ä»¥è°ƒç”¨éå†å™¨ä»è€Œæ­£ç¡®éå†å­—ç¬¦ä¸²


### APIå¤‡å¿˜å½•
- **charAt** å¯ä»¥è¿”å›æŒ‡å®šä½ç½®çš„å­—ç¬¦
- **link** `'è°·æ­Œ'.link('https://google.com')  ==>  <a href="https://google.com">è°·æ­Œ</a>`
- **anchor** `'é”šç‚¹åœ¨è¿™é‡Œ'.anchor('here') ==>  <a name="here">é”šç‚¹åœ¨è¿™é‡Œ</a>`
- **includes**  **startsWith**  **endsWith**  **padStart** **padEnd**
- **codePointAt** **charCodeAt** è¿”å›æŒ‡å®šä½ç½®å­—ç¬¦çš„ç ç‚¹ï¼ŒcodePointAtå¯ä»¥è¯†åˆ«è¾…åŠ©å¹³é¢çš„å­—ç¬¦ï¼Œä½†æ˜¯ç´¢å¼•å‚æ•°å¿…é¡»æ˜¯å­—ç¬¦çš„å¤´ä¸€ä¸ªä½ç½®ï¼Œå¦åˆ™æ— æ³•è¯†åˆ«
- **String.fromCharCode** **String.fromCodePoint** å¯ä»¥å°†unicodeç ç‚¹æ˜ å°„ä¸ºå­—ç¬¦ï¼Œå¯ä»¥ä¼ å¤šä¸ªå‚æ•°æœ€ç»ˆè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯ä¸€ä¸ªå‚æ•°æ˜ å°„ä¸ºä¸€ä¸ªå­—ç¬¦


### æ ‡ç­¾æ¨¡æ¿
æ ‡ç­¾æ¨¡æ¿å…¶å®ä¸æ˜¯æ¨¡æ¿ï¼Œè€Œæ˜¯å‡½æ•°è°ƒç”¨çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚â€œæ ‡ç­¾â€æŒ‡çš„å°±æ˜¯å‡½æ•°ï¼Œç´§è·Ÿåœ¨åé¢çš„æ¨¡æ¿å­—ç¬¦ä¸²å°±æ˜¯å®ƒçš„å‚æ•°
```
let name = 'tom';
let age = 10;

function say(word){
  console.log('raw world:' + word.raw);
}

say`name: ${name} age: ${age}`
// ç­‰ä»·äº
say(['name: ',' age: '],name,age);
```


### é€šè¿‡æ ‡ç­¾æ¨¡ç‰ˆæ¥å®ç°è¿‡æ»¤htmlå­—ç¬¦ä¸²æ¶æ„å­—ç¬¦
```
let message = SaferHTML`<p>${sender} has sent you a message.</p>`;

function SaferHTML(templateData) {
  let s = templateData[0];
  for (let i = 1; i < arguments.length; i++) {
    let arg = String(arguments[i]);

    // Escape special characters in the substitution.
    s += arg.replace(/&/g, "&amp;")
    .replace(/</g, "&lt;")
    .replace(/>/g, "&gt;");

    // Don't escape special characters in the template.
    s += templateData[i];
  }
  return s;
}
```


### ä½¿ç”¨æ¨¡ç‰ˆå­—ç¬¦ä¸²æ¥å®ç°ä¸€ä¸ªæ¨¡ç‰ˆç¼–è¯‘å™¨
```
function compile(template) {
  const evalExpr = /<%=(.+?)%>/g;
  const expr = /<%([\s\S]+?)%>/g;

  template = template
  .replace(evalExpr, '`); \n echo( $1 ); \n echo(`')
  .replace(expr, '`); \n $1 \n echo(`');

  template = 'echo(`' + template + '`);';

  let script =
  `(function parse(data){
    let output = "";

    function echo(html){
      output += html;
    }

    ${ template}

    return output;
  })`;

  return script;
}

let template = `
  <ul>
    <% for(let i=0; i < data.supplies.length; i++) { %>
    <li><%= data.supplies[i] %></li>
    <% } %>
  </ul>
`;

let parse = eval(compile(template));

parse({ supplies: ["broom", "mop", "cleaner"] });
```

### æ‰©å±•èµ„æº
- https://home.unicode.org/
- https://codepoints.net/